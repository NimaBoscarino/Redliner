L.Control.HatFullscreen=L.Control.extend({options:{position:"topright",title:{"false":"View Fullscreen","true":"Exit Fullscreen"}},onAdd:function(b){var a=L.DomUtil.create("div","leaflet-control-fullscreen  leaflet-control");this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part btn btn-default ",a);this.link.href="#";this.link.innerHTML="<i class='glyphicon glyphicon-fullscreen'></i> View Fullscreen";this._map=b;this._map.on("fullscreenchange",this._toggleTitle,this);this._toggleTitle();L.DomEvent.on(this.link,"click",this._click,this);return a},_click:function(a){L.DomEvent.stopPropagation(a);L.DomEvent.preventDefault(a);this._map.toggleFullscreen()},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});L.Map.include({isFullscreen:function(){return this._isFullscreen||false},toggleFullscreen:function(){var a=this.getContainer();if(this.isFullscreen()){if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{L.DomUtil.removeClass(a,"leaflet-pseudo-fullscreen");this._setFullscreen(false);this.invalidateSize();this.fire("fullscreenchange")}}}}}else{if(a.requestFullscreen){a.requestFullscreen()}else{if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else{if(a.webkitRequestFullscreen){a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else{if(a.msRequestFullscreen){a.msRequestFullscreen()}else{L.DomUtil.addClass(a,"leaflet-pseudo-fullscreen");this._setFullscreen(true);this.invalidateSize();this.fire("fullscreenchange")}}}}}},_setFullscreen:function(b){if(b){$(".leaflet-control-fullscreen-button").html('<i class="glyphicon glyphicon-resize-small"></i> Exit Fullscreen')}else{$(".leaflet-control-fullscreen-button").html('<i class="glyphicon glyphicon-fullscreen"></i> View Fullscreen')}this._isFullscreen=b;var a=this.getContainer();if(b){L.DomUtil.addClass(a,"leaflet-fullscreen-on")}else{L.DomUtil.removeClass(a,"leaflet-fullscreen-on")}},_onFullscreenChange:function(a){var b=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;if(b===this.getContainer()&&!this._isFullscreen){this._setFullscreen(true);this.fire("fullscreenchange")}else{if(b!==this.getContainer()&&this._isFullscreen){this._setFullscreen(false);this.fire("fullscreenchange")}}}});L.Map.mergeOptions({fullscreenControl:false});L.Map.addInitHook(function(){if(this.options.fullscreenControl){this.fullscreenControl=new L.Control.HatFullscreen();this.addControl(this.fullscreenControl)}var a;if("onfullscreenchange" in document){a="fullscreenchange"}else{if("onmozfullscreenchange" in document){a="mozfullscreenchange"}else{if("onwebkitfullscreenchange" in document){a="webkitfullscreenchange"}else{if("onmsfullscreenchange" in document){a="MSFullscreenChange"}}}}if(a){var b=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,a,b)});this.on("unload",function(){L.DomEvent.off(document,a,b)})}});L.control.hatfullscreen=function(a){return new L.Control.HatFullscreen(a)};